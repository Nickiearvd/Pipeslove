/*
 *	 v1.7.2
 *
 *	Copyright (c) 2017 By WP Dancers.
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(h,q,n){h instanceof String&&(h=String(h));for(var m=h.length,t=0;t<m;t++){var x=h[t];if(q.call(n,x,t,h))return{i:t,v:x}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,q,n){h!=Array.prototype&&h!=Object.prototype&&(h[q]=n.value)};
$jscomp.getGlobal=function(h){return"undefined"!=typeof window&&window===h?h:"undefined"!=typeof global&&null!=global?global:h};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(h,q,n,m){if(q){n=$jscomp.global;h=h.split(".");for(m=0;m<h.length-1;m++){var t=h[m];t in n||(n[t]={});n=n[t]}h=h[h.length-1];m=n[h];q=q(m);q!=m&&null!=q&&$jscomp.defineProperty(n,h,{configurable:!0,writable:!0,value:q})}};
$jscomp.polyfill("Array.prototype.find",function(h){return h?h:function(h,n){return $jscomp.findInternal(this,h,n).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var h=0;return function(q){return $jscomp.SYMBOL_PREFIX+(q||"")+h++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var h=$jscomp.global.Symbol.iterator;h||(h=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[h]&&$jscomp.defineProperty(Array.prototype,h,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(h){var q=0;return $jscomp.iteratorPrototype(function(){return q<h.length?{done:!1,value:h[q++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(h){$jscomp.initSymbolIterator();h={next:h};h[$jscomp.global.Symbol.iterator]=function(){return this};return h};$jscomp.iteratorFromArray=function(h,q){$jscomp.initSymbolIterator();h instanceof String&&(h+="");var n=0,m={next:function(){if(n<h.length){var t=n++;return{value:q(t,h[t]),done:!1}}m.next=function(){return{done:!0,value:void 0}};return m.next()}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill("Array.prototype.keys",function(h){return h?h:function(){return $jscomp.iteratorFromArray(this,function(h){return h})}},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(h){return h?h:function(h,n,m){var q=this.length||0;0>n&&(n=Math.max(0,q+n));if(null==m||m>q)m=q;m=Number(m);0>m&&(m=Math.max(0,q+m));for(n=Number(n||0);n<m;n++)this[n]=h;return this}},"es6","es3");
$jscomp.polyfill("Array.prototype.findIndex",function(h){return h?h:function(h,n){return $jscomp.findInternal(this,h,n).i}},"es6","es3");
(function(h,q,n){function m(c){function a(a,f){return Array.isArray(a)?a.every(function(a){switch(a){case "required":return""!==String(f).trim();case "number":return("number"===typeof f||"string"===typeof f)&&!isNaN(f);case "email":return/^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$/gi.test(f);case "hashtag":return/^#[^<>[\]{}|\\\/^~%# :;,$%?\0-\cZ]+$/gi.test(f);case "profile":return/^#[^<>[\]{}|\\\/^~%# :;,$%?\0-\cZ]+$/gi.test(f);default:a=a.split(":");if("min"===a[0])return f.length>=+a[1];if("max"===
a[0])return f.length<=+a[1]}return!1}):!1}return{validate:function(b){return a(b.split("|"),c)},regex:function(a){return a instanceof RegExp&&a.test(c)}}}function t(e,a,b){var f=this,d=null,y="empty",k;f.client_id=a;f.redirect_uri=b;f.auth=function(a){a="https://api.instagram.com/oauth/authorize/?"+c.param({client_id:f.client_id,redirect_uri:f.redirect_uri,response_type:"code",scope:a||"basic public_content"});h.open(a,"__blank");var b=c.Deferred(),u;setTimeout(function Y(){c.getJSON(e.get_base_request_url("validate-auth")).done(function(a){"valid"===
a.status?(d=!0,k=a.data,b.resolve(k),clearTimeout(u)):"invalid"===a.status&&(d=!1,b.reject("invalid"));y=a.status}).fail(function(){d=!1;y="empty"});u=setTimeout(Y,1E3)},1E3);return b.promise()};f.disconnect=function(){c.get(p.get_base_request_url("disconnect")).done(function(){d=!1;user_authorized=null;y="empty"});return f};f.is_authorized=function(){var a=c.Deferred();null!==d?d?a.resolve(k):a.reject(y):c.getJSON(e.get_base_request_url("validate-auth")).done(function(b){"valid"===b.status?(d=!0,
k=b.data,a.resolve(k)):"invalid"===b.status&&(d=!1,a.reject("invalid"));y=b.status}).fail(function(){d=!1;y="invalid"});return a.promise()}}function x(){}function M(e){var a=this,b=c(".flexi-create-stream"),f=c("#wpbody");a.container=c(".flexi-welcome");(function(){b.click(function(){e.create_stream_popup.show();return!1})})();a.show=function(){a.toggle(!0);f.addClass("flexi-welcome-body");return a};a.hide=function(){a.toggle(!1);f.removeClass("flexi-welcome-body");return a}}function N(e){function a(){var a=
c(this);a.addClass("flexi-selected").siblings().removeClass("flexi-selected");l.panels.removeClass("flexi-visible").eq(a.index()).addClass("flexi-visible");sessionStorage.flexy_last_page=a.index();"Auth"===a.text()&&g();p&&l.has_changes&&(l.container.find(".flexi-panel-settings input, textarea").each(function(){"checkbox"===this.type?this.checked="true"===this.dataset.origValue:this.value=this.dataset.origValue}),1!==a.index()&&p.save_notify.hide());return!1}function b(){var a=+c(this).closest(".flexi-stream").data("stream");
p.streams.forEach(function(b){b.id===a&&(v.load_stream(b),v.select_tab("edit"),v.show())});return!1}function f(){if(c(".flexi-dialog-shortcode").length)return!1;var a=+c(this).closest(".flexi-stream").data("stream");p.streams.forEach(function(b){b.id===a&&Z("shortcode",'[flexi-instagram use="'+b.id+'"]').show()});return!1}function d(){var a=+c(this).closest(".flexi-stream").data("stream");p.streams.forEach(function(b){b.id===a&&(v.load_stream(b),v.select_tab("settings"),v.show())});return!1}function y(){if(c(".flexi-dialog").length)return!1;
var a=c(this).closest(".flexi-stream"),b=a.find(".flexi-bottom-section > h2").text(),k=a.data("stream");W("Remove","Are you sure you want to remove '<b>"+b+"</b>' stream?").show().on_yes(function(){var b=new E;b.id=k;b.remove();for(b=0;b<p.streams.length;b++)p.streams[b].id===k&&p.streams.splice(b,1);a.remove();0===p.streams.length&&(p.main_page.hide(),p.welcome_page.show());return!1});return!1}function k(){e.instagram_auth.auth().done(function(a){l.container.find(".flexi-auth-title-connected").addClass("flexi-visible").siblings(".flexi-auth-title-connect").removeClass("flexi-visible");
l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected").addClass("flexi-visible").siblings().removeClass("flexi-visible");l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected .flexi-auth-name").text(a.full_name);l.nav_items.eq(2).removeClass("flexi-wrong-settings")}).fail(function(){l.container.find(".flexi-auth-title-connected").removeClass("flexi-visible").siblings(".flexi-auth-title-connect").addClass("flexi-visible");l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected").addClass("flexi-visible").siblings().removeClass("flexi-visible");
l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected .flexi-error").addClass("flexi-visible");l.nav_items.eq(2).addClass("flexi-wrong-settings")});return!1}function L(){e.instagram_auth.disconnect();l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connect").addClass("flexi-visible").siblings().removeClass("flexi-visible");l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected .flexi-error").removeClass("flexi-visible");l.container.find(".flexi-auth-title-connected").removeClass("flexi-visible").siblings(".flexi-auth-title-connect").addClass("flexi-visible");
return!1}function z(){c(this).closest(".flexi-profanity-field").toggleClass("flexi-expanded");return!1}function u(){var a="https://www.youtube.com/embed/"+this.dataset.video+"?autoplay=1&rel=0&showinfo=0";l.video_popup||(l.video_popup=new J);l.video_popup.show(a);return!1}function g(){e.instagram_auth.is_authorized().done(function(a){l.container.find(".flexi-auth-title-connected").addClass("flexi-visible").siblings(".flexi-auth-title-connect").removeClass("flexi-visible");l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected").addClass("flexi-visible").siblings().removeClass("flexi-visible");
l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected .flexi-auth-name").text(a.full_name);l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected .flexi-error").removeClass("flexi-visible");l.nav_items.eq(2).removeClass("flexi-wrong-settings");c("#likes-id").val(a.username)}).fail(function(a){"empty"===a?(l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connect").addClass("flexi-visible").siblings().removeClass("flexi-visible"),l.container.find(".flexi-auth-title-connected").removeClass("flexi-visible").siblings(".flexi-auth-title-connect").addClass("flexi-visible")):
(l.container.find(".flexi-auth-title-connected").removeClass("flexi-visible").siblings(".flexi-auth-title-connect").addClass("flexi-visible"),l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected").addClass("flexi-visible").siblings().removeClass("flexi-visible"),l.panels.filter(".flexi-panel-auth").find(".flexi-auth-connected .flexi-error").addClass("flexi-visible"));l.nav_items.eq(2).addClass("flexi-wrong-settings");c("#likes-id").val("self")})}function h(a){var b=c(".flexi-support-form"),
k=c("#flexi-name");a=c("#flexi-email");var f=c("#flexi-website"),d=c("#flexi-issue-description"),e=m(k.val()).validate("required|min:3"),g=m(a.val()).validate("required|email"),z=m(f.val()).validate("required|min:4"),u=m(d.val()).validate("required|min:4");k.toggleClass("flexi-error",!e);a.toggleClass("flexi-error",!g);f.toggleClass("flexi-error",!z);d.toggleClass("flexi-error",!u);e&&g&&z&&u&&(b.addClass("flexi-loading"),c.getJSON("https://www.wpdancers.com/products/flexi-social-map/wp-admin/admin-ajax.php?action=api_contact",
b.serialize()).done(function(a){try{var f=a.status||"failed",c=a.message||"Something went wrong.";b.addClass("flexi-"+f).attr("data-message",c);setTimeout(function(){k.add(d).val("");b.removeClass("flexi-"+f)},3E3)}catch(ba){}b.removeClass("flexi-loading")}).fail(function(){b.addClass("flexi-failed").removeClass("flexi-loading").attr("data-message","Something went wrong.");setTimeout(function(){k.add(d).val("");b.removeClass("flexi-failed")},3E3)}));return!1}var l=this;l.has_changes=!1;l.container=
c(".flexi-main");l.nav_items=l.container.find(".flexi-nav-section .flexi-nav-item");l.panels=l.container.find(".flexi-main-content .flexi-panel");l.streams=l.container.find(".flexi-stream-list .flexi-stream");l.video_popup=new J;(function(){l.container.find(".flexi-panel-settings").on("change",function(){p.save_notify.show();l.has_changes=!0});l.container.find(".flexi-panel-settings input, textarea").each(function(){this.dataset.origValue="checkbox"===this.type?this.checked:this.value});l.nav_items.click(a);
"flexy_last_page"in sessionStorage&&l.nav_items.eq(sessionStorage.flexy_last_page).click();g();l.streams.on("click",".flexi-edit-stream",b);l.streams.on("click",".flexi-action-shortcode",f);l.streams.on("click",".flexi-action-settings",d);l.streams.on("click",".flexi-action-remove",y);l.panels.on("click",".flexi-connect-instagram",k);l.panels.on("click",".flexi-disconnect-account",L);l.panels.on("click",".flexi-profanity-edit",z);l.panels.on("click",".flexi-support-video",u);l.panels.on("click",'.flexi-support-form input[type="submit"]',
h)})();l.save_settings=function(){var a=new O;l.has_changes=!1;var b=[].map.call(c('[id^="flexi-role-"]').filter(":checked"),function(a){return a.id.replace("flexi-role-","")}).join(",");a.cache_time=c("#cache-time").val();a.moderation=c("#moderation").prop("checked");a.profanity_moderation=c("#profanity-filter").val();a.disable_lazy_load=c("#disable-lazy-load").prop("checked");a.moderate_roles=""===b?"administrator":b;a.remove_data_on_uninstall=c("#remove-all-on-uninstall").prop("checked");a.save();
l.container.find(".flexi-panel-settings input, textarea").each(function(){this.dataset.origValue="checkbox"===this.type?this.checked:this.value});return l};l.add_stream_html=function(a){var k=new Date(a.created_at),c={grid:"Grid layout",slide:"Slide layout",hashtag:"Hashtag",profile:"Profile",likes:"Likes",location:"Location"};a='<div class="flexi-stream" data-stream="'+a.id+'"><div class="flexi-top-section"><div class="flexi-top-icons"><i class="flexi-icon-instagram" title="Instagram"></i><i class="flexi-icon-'+
a.layout+'" title="'+c[a.layout]+'"></i><i class="flexi-icon-'+a.feeds[0].type+'" title="'+c[a.feeds[0].type]+'"></i></div><h1>'+"January February March April May June July August September October November December".split(" ")[k.getMonth()]+" <span>"+k.getFullYear()+'</span></h1></div><div class="flexi-bottom-section"><h2>'+a.name+'</h2><div class="flexi-stream-actions"><a href="#" class="flexi-action-shortcode">Shortcode</a><a href="#" class="flexi-action-settings">Settings</a><a href="#" class="flexi-action-remove">Remove</a></div><button class="flexi-edit-stream">View &amp; edit</button></div></div>';
l.container.find(".flexi-stream-list").append(a);l.streams=l.container.find(".flexi-stream-list .flexi-stream");l.streams.on("click",".flexi-edit-stream",b);l.streams.on("click",".flexi-action-shortcode",f);l.streams.on("click",".flexi-action-settings",d);l.streams.on("click",".flexi-action-remove",y)}}function A(){}function P(e){function a(a){switch(a){case "profile":return H.val();case "likes":return"self";case "location":return w.val()}return F.val()}function b(){var a=c(this),b=a.attr("data-type");
if(a.hasClass("flexi-disabled"))return!1;a.addClass("flexi-selected").siblings().removeClass("flexi-selected").closest(".flexi-step-add-feed").attr("data-type",b).find(".flexi-tabs-content .flexi-tab-"+b).show().siblings().hide();a.closest(".flexi-step-add-feed").find(".flexi-tabs-content .flexi-tab-"+b+" .flexi-input-text").focus();return!1}function f(){var a=c(this);if(a.hasClass("flexi-not-available"))return!1;a.addClass("flexi-selected").siblings().removeClass("flexi-selected");return!1}function d(a){if(!g.validate_step())return!1;
if("add"===h)return z(),g.hide(),setTimeout(function(){g.reset()},300),!1;if("edit"===h)return u(),g.hide(),setTimeout(function(){g.reset()},300),!1;if("add-feed"===g.steps.eq(l).attr("data-step")){var b=c(this);b.addClass("flexi-working");var k=new E;a=g.get_data();k.name=a["stream-name"];k.description=a["stream-description"];k.layout=a.layout;k.feeds=[{network:a.network,type:a.type,value:a.value,enabled:!0}];"slide"===k.layout&&(k.number_of_cols=4,k.number_of_rows=2,k.gutter=0);k.save().done(function(){S=
k;p.streams.push(k);var a=new Worker(p.get_base_assets_url("js/workers/feed-worker.js"));a.onmessage=function(a){e.main_page.add_stream_html(k);b.removeClass("flexi-working");g.next()};setTimeout(function(){a.postMessage({action:"process-feeds",stream:k.id,base_path:p.get_base_request_url()})},500)});return!1}if("layout"===g.steps.eq(l).attr("data-step"))return g.next(),!1;g.next();return!1}function y(){e.instagram_auth.auth().done(function(a){c("#profile-id").val(a.username);d();e.main_page.nav_items.eq(2).removeClass("flexi-wrong-settings")});
return!1}function k(){g.hide();setTimeout(function(){g.reset()},300);return!1}function L(){v.load_stream(S);v.select_tab("edit");v.show();g.hide();setTimeout(function(){g.reset();p.welcome_page.is_visible()&&(p.main_page.show(),p.welcome_page.hide())},600);return!1}function z(){var a=g.get_data(),b=new I;b.stream_id=v.stream().id;b.network=a.network;b.type=a.type;b.value=a.value;v.stream().feeds.push(b);b.save().done(function(){var k=new Worker(p.get_base_assets_url("js/workers/feed-worker.js"));
k.onmessage=function(a){r.reload();D.toggle_loading(!0)};k.postMessage({action:"process-feed",base_path:p.get_base_request_url(),id:b.id});c("#stream-feeds").data("feeds-field").add([{id:b.id,network:a.network,type:a.type,value:a.value,enabled:!0}])})}function u(){if(G){var a=g.get_data(),b=new I;b.stream_id=v.stream().id;b.id=G.id;b.network=G.network=a.network;b.type=G.type=a.type;b.value=G.value=a.value;b.save().done(function(){var k=new Worker(p.get_base_assets_url("js/workers/feed-worker.js"));
k.onmessage=function(a){r.reload();D.toggle_loading(!0)};k.postMessage({action:"process-feed",base_path:p.get_base_request_url(),id:b.id});c("#stream-feeds").data("feeds-field").edit({id:b.id,network:a.network,type:a.type,value:a.value,enabled:!0})})}}var g=this,h="normal",l=0,q=0,n,t,F,H,w,S,G,x=!1;g.container=c(".flexi-create-stream-popup");g.steps=g.container.find(".flexi-main-popup .flexi-step-panel");g.layouts=g.container.find(".flexi-layouts-holder > a");g.add_feed_tabs=g.container.find(".flexi-step-add-feed .flexi-tabs li");
g.progress_steps=g.container.find(".flexi-progress-bar .flexi-progress-step");(function(){q=g.steps.length;n=g.container.find("#stream-name");t=g.container.find("#stream-description");F=g.container.find(".flexi-hashtag-input-holder .flexi-input-text");H=g.container.find(".flexi-profile-input .flexi-input-text");w=g.container.find(".flexi-location-input .flexi-input-text");g.container.find(".flexi-step-next").click(d);g.container.find(".flexi-step-cancel").click(k);g.container.find(".flexi-connect-instagram").click(y);
g.container.find(".flexi-customize-it").click(L);B.on("keydown",function(a){if(g.is_visible()){a=a.keyCode||a.which;var b=g.steps.eq(l).attr("data-step");13===a?"connect"===b?y():"verify"===b?L():"add-feed"===b?g.container.find(".flexi-current .flexi-step-next").click():d():39===a&&"layout"===b?(a=g.layouts.filter(".flexi-selected").next(),a.length&&a.click()):37===a&&"layout"===b&&(a=g.layouts.filter(".flexi-selected").prev(),a.length&&a.click())}});g.add_feed_tabs.click(b);g.layouts.click(f)})();
g.show=function(){g.toggle(!0);switch(g.steps.eq(l).attr("data-step")){case "create":setTimeout(function(){c("#stream-name").focus()},100);break;case "add-feed":setTimeout(function(){var a=g.add_feed_tabs.filter(".flexi-selected").attr("data-type");"hashtag"===a?F.focus():"profile"===a?H.focus():"location"===a&&w.focus()},100)}e.instagram_auth.is_authorized().done(function(a){g.progress_steps.eq(2).hide();x=!0;c("#profile-id").val(a.username)}).fail(function(){g.progress_steps.eq(2).show();x=!1;c("#profile-id").val("self")});
return this};g.step=function(a){x&&2==a&&(a=3);return"number"===typeof a&&!isNaN(a)&&-1<+a&&+a<q?(g.steps.removeClass("flexi-current").eq(a).addClass("flexi-current"),g.progress_steps.removeClass("flexi-current").eq(a).addClass("flexi-current"),l=a,"add-feed"===g.steps.eq(l).attr("data-step")&&F.focus(),this):l};g.next=function(){g.step(l+1);return g};g.prev=function(){g.step(l-1);return g};g.add_feed_mode=function(){h="add";g.step(3);g.container.find(".flexi-create-stream-container").addClass("flexi-no-progress");
g.steps.eq(3).find(".flexi-popup-title").text("Add Feed");g.steps.eq(3).find(".flexi-step-next .flexi-progress-button-caption").text("Add");return g};g.edit_feed_mode=function(a){if(!a)return g;a=v.stream().feeds.filter(function(b){return b.id===a.id});G=a=a[0];"profile"===a.type?H.val(a.value):"hashtag"===a.type?F.val(a.value):"location"===a.type&&w.val(a.value);h="edit";g.step(3);g.container.find(".flexi-create-stream-container").addClass("flexi-no-progress");g.steps.eq(3).find(".flexi-popup-title").text("Edit Feed");
g.steps.eq(3).find(".flexi-step-next .flexi-progress-button-caption").text("Apply");g.add_feed_tabs.filter('[data-type="'+a.type+'"]').click();return g};g.reset=function(){G=S=null;h="normal";g.step(0);g.container.find(".flexi-error").removeClass("flexi-error");g.container.find(".flexi-create-stream-container").removeClass("flexi-no-progress");g.steps.find(".flexi-input-text").val("");g.layouts.eq(0).click();g.add_feed_tabs.eq(0).click();g.steps.eq(3).find(".flexi-popup-title").text("Add Feed");g.steps.eq(3).find(".flexi-step-next .flexi-progress-button-caption").text("Next");
return g};g.get_data=function(){var b=g.container.find(".flexi-step-add-feed").attr("data-type")||"hashtag",k=a(b);return{"stream-name":n.val(),"stream-description":t.val(),layout:g.layouts.filter(".flexi-selected").attr("data-layout"),"access-token":"",network:"instagram",type:b,value:k.trim()}};g.validate_step=function(a){a=a||g.steps.eq(l).attr("data-step");switch(a){case "create":if(!m(n.val()).validate("required")){n.addClass("flexi-error");break}return!0;case "layout":return!0;case "connect":return!0;
case "add-feed":a=g.steps.eq(l).attr("data-type")||"hashtag";if("hashtag"===a){if(!m("#"+F.val().trim()).validate("required|hashtag")){F.addClass("flexi-error").parent().addClass("flexi-error");break}}else if("profile"===a){if(!m("#"+H.val().trim()).validate("required|profile")){H.addClass("flexi-error").parent().addClass("flexi-error");break}}else if("location"===a&&!m("#"+w.val().trim()).regex(/https?:\/\/[w]{3}?\.?instagram\.com\/explore\/locations\/([0-9]*?)\/.*/i)){w.addClass("flexi-error").parent().addClass("flexi-error");
break}return!0}return!1}}function J(e){var a=this;a.container=c('<div class="flexi-video-popup"><div class="flexi-video-popup-inner"><a href="#" class="flexi-video-popup-close"></a><iframe width="560" height="315" src="" frameborder="0" allowfullscreen /></div></div>').appendTo("body");a.frame=a.container.find("iframe");a.container.click(function(b){if(c(b.target).is(a.container))return a.hide(),!1});a.container.on("click",".flexi-video-popup-close",function(){a.hide()});a.show=function(b){a.frame.get(0).src=
b;a.toggle(!0);return a};a.hide=function(){a.frame.get(0).src="";a.toggle(!1);return a}}function Q(e,a){function b(a){var b=q.createElement("a");b.href="#";b.id=a.id||null;b.className=a.class||null;b.innerHTML=a.caption||"";return b}var f=this,d;f.container=c(".flexi-notification-box");(function(a,k){var e=c(q.createElement("div"));e.addClass("flexi-notification-box");e.append("<p>"+a+"</p>");Array.isArray(k)&&(d=c(k.map(b)),e.append(d));f.container=e;e.appendTo("body")})(e,a);f.toggle_expand=function(a){f.container.toggleClass("flexi-collapsed",
"boolean"===typeof a?!a:a);return this};f.expand=function(){return f.toggle_expand(!0)};f.collapse=function(){return f.toggle_expand(!1)};f.show_after=function(a){setTimeout(function(){f.show()},a);return this};f.hide_after=function(a){setTimeout(function(){f.hide()},a);return this};f.expand_after=function(a){setTimeout(function(){f.expand()},a);return this};f.collapse_after=function(a){setTimeout(function(){f.collapse()},a);return this};f.buttons=function(){return d}}function K(e,a,b,f){function d(a,
b,f,d){var k=c(q.createElement("div"));k.addClass("flexi-dialog"+(d?" "+d:""));k.append('<div class="flexi-dialog-container"><header class="flexi-dialog-header"><h3 class="flexi-dialog-title">'+a+'</h3><a href="#" class="flexi-dialog-close"></a></header><section class="flexi-dialog-content">'+b+"</section></div>");f&&k.find(".flexi-dialog-container").append('<footer class="flexi-dialog-footer">'+f+"</footer>");h.container=k;k.appendTo("body")}var h=this;(function(){d(e,a,b,f);h.container.find(".flexi-dialog-close").click(function(){h.destroy();
return!1})})();h.destroy=function(){h.hide();setTimeout(function(){h.container.remove()},300);return h}}function W(c,a){var b=Object.create(new K(c,"<p>"+a+"</p>",'<a href="#" class="flexi-dialog-cancel">Cancel</a><a href="#" class="flexi-dialog-yes">Yes</a>'));b.container.find(".flexi-dialog-cancel").click(function(){b.destroy();return!1});b.on_yes=function(a){b.container.find(".flexi-dialog-yes").click(function(d){a(d);b.destroy();return!1});return b};b.on_cancel=function(a){b.container.find(".flexi-dialog-cancel").click(function(){a();
b.destroy();return!1});return b};return b}function Z(c,a){var b=Object.create(new K(c,'<label for="flexi-shortcode-input">Stream description:</label><div class="flexi-shortcode"><input type="text" readonly value=\''+a+'\' id="flexi-shortcode-input" /><a href="#" class="flexi-shortcode-copy">Copy</a></div><p>How to use this shortcode:</p><p>1. Copy the shortcode and paste it to the page or post you want to include.<br />2. Save the post and enjoy the socialexperience. That\u2019s all. Simple, right?</p><a href="#" class="flexi-link">Need more help? How to add a flexi stream to a page using a shortode - VIDEO</a><a href="#" class="flexi-button">Ok. Got it.</a>',
null,"flexi-dialog-shortcode"));b.container.find(".flexi-button").click(function(){b.destroy();return!1});return b}function C(){}function O(){this._model_name="global";this.cache_time=30;this.moderation=!1;this.profanity_moderation="";this.disable_lazy_load=!1;this.moderate_roles="administrator";this.remove_data_on_uninstall=!1}function I(){this._model_name="feed";this.id=0;this.network="instagram";this.type="hashtag";this.value="";this.enabled=!0}function E(){this._model_name="stream";this.id=0;
this.description=this.name="";this.layout="grid";this.feeds=[];this.approve_new_posts=!0;this.disable_on_small_screen=!1;this.items_animation="none";this.disable_pagination=!1;this.number_of_visible_items=30;this.items_per_page=20;this.private=!1;this.height=this.width="auto";this.transition="move-up";this.card_skin="classic";this.lightbox_skin="insta";this.has_custom_colors=!1;this.custom_colors=T[this.card_skin];this.custom_js=this.custom_css="";this.text_alignment="left";this.open_links_in_new_tab=
!0;this.date_format="short";this.hide_text=this.hide_meta_info=this.force_square_photos=!1;this.enable_lightbox=!0;this.number_of_cols=7;this.number_of_rows=3;this.gutter=10;this.slide_direction="horizontal";this.order_by="created";this.order="desc";this.pagination_type="button";this.created_at="";this.get_model=function(){return E}}function U(c,a){function b(a){a=parseInt(a.replace("#","0x"),16);return{r:Math.min(255,Math.max(0,a>>16)),g:Math.min(255,Math.max(0,(a&65280)>>8)),b:Math.min(255,Math.max(0,
a&255))}}function f(a){"string"==typeof a&&(a=a.replace("rgb(",""),a=a.replace(")",""),a=a.split(", "),a.r=parseInt(a[0],10),a.g=parseInt(a[1],10),a.b=parseInt(a[2],10));var b={h:0,s:0,b:0},k=Math.max(a.r,a.g,a.b),c=k-Math.min(a.r,a.g,a.b);b.b=k;b.s=0!=k?255*c/k:0;b.h=0!=b.s?a.r==k?(a.g-a.b)/c:a.g==k?2+(a.b-a.r)/c:4+(a.r-a.g)/c:-1;b.h*=60;0>b.h&&(b.h+=360);b.s*=100/255;b.b*=100/255;b.h=Math.min(360,Math.max(0,b.h));b.s=Math.min(100,Math.max(0,b.s));b.b=Math.min(100,Math.max(0,b.b));return b}function d(a){var b,
c;var k=Math.round(a.h);var d=Math.round(255*a.s/100);a=Math.round(255*a.b/100);if(0==d)k=b=c=a;else{d=(255-d)*a/255;var f=k%60*(a-d)/60;360==k&&(k=0);60>k?(k=a,c=d,b=d+f):120>k?(b=a,c=d,k=a-f):180>k?(b=a,k=d,c=d+f):240>k?(c=a,k=d,b=a-f):300>k?(c=a,b=d,k=d+f):360>k?(k=a,b=d,c=a-f):c=b=k=0}return{r:Math.min(255,Math.max(0,Math.round(k))),g:Math.min(255,Math.max(0,Math.round(b))),b:Math.min(255,Math.max(0,Math.round(c)))}}function e(a){"string"==typeof a?(a=a.replace("rgb(",""),a=a.replace(")",""),
a=a.split(", "),a[0]=parseInt(a[0],10).toString(16),a[1]=parseInt(a[1],10).toString(16),a[2]=parseInt(a[2],10).toString(16)):a=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];for(var b=0;b<a.length;b++)a[b]=a[b].toString(16),1==a[b].length&&(a[b]="0"+a[b]);a=a.join("");a=a.toString(16);var c=6-a.length;if(0<c){var d=[];for(b=0;b<c;b++)d.push("0");d.push(a);a=d.join("")}return a}this.hsb={h:0,s:0,b:0};this.rgb={r:0,g:0,b:0};this.hex=0;"hsb"==a?(this.hsb=c,this.rgb=d(c),this.hex=e(d(c))):"rgb"==
a?(this.hsb=f(c),this.rgb=c,this.hex=e(c)):(this.hsb=f(b(c)),this.rgb=b(c),this.hex=c)}function aa(){var e=this,a={transition:c("#transition"),card_skin:c("#card-skin"),lightbox_skin:c("#lightbox-skin"),layout:c("#layout"),custom_css:c("#custom-css"),custom_js:c("#custom-js"),text_alignment:c("#text-alignment"),open_links_in_new_tab:c("#open-links-in-new-tab"),date_format:c("#date-format"),hide_meta_info:c("#hide-meta-info"),hide_text:c("#hide-text"),enable_lightbox:c("#enable-lightbox"),number_of_cols:c("#number-of-cols"),
gutter:c("#gutter"),order_by:c("#order-by"),order:c("#order")};e.container=c(".flexi-editor-properties");e.panels=e.container.find(".flexi-properties-panel");(function(){e.panels.children("h1").click(function(){c(this).parent().toggleClass("flexi-expanded");return!1});e.panels.filter(":not(.flexy-properties-panel-custom-colors)").addClass("flexi-expanded")})();e.load_stream=function(b){for(var c in a)b[c]&&a[c].val(b[c])};e.get_data=function(){var b={},c;for(c in a)stream[c]&&(b[c]=a[c].val());return b};
e.expand=function(a){e.panels.eq(a).addClass("flexi-expanded").siblings().removeClass("flexi-expanded");return e};e.collapse=function(a){e.panels.eq(a).removeClass("flexi-expanded").siblings().addClass("flexi-expanded");return this}}function R(){function e(){c(this).closest(".flexi-expandable").toggleClass("flexi-expanded");return!1}var a=this,b,f,d={transition:["none","move-up"],"card-skin":"classic","text-alignment":"*",order:"*",gutter:"*","load-more-background":"*"},h={transition:"move-up","card-skin":"classic",
"text-alignment":"left",order:"desc",gutter:10,"load-more-background":"#3bb3e0"};a.container=c(".flexi-main-editor-popup");a.tabs=a.container.find(".flexi-editor-tabs a");a.stream_name=a.container.find(".flexi-stream-name");(function(){a.tabs.click(function(){var b=c(this);if(!b.is(".flexi-editor-tab-upgrade-to-pro"))return a.select_tab(b.index()),!1});a.container.find(".flexi-close-editor").click(function(){a.update_stream_status();p.save_notify.hide();a.hide();r.reset();D.reset()});a.container.on("change",
function(){a:{for(a in d){if("string"===typeof d[a])if("*"===d[a])continue;else{if(c("#"+a).val()===d[a])continue}else if(Array.isArray(d[a])&&~d[a].indexOf(c("#"+a).val()))continue;var a=!1;break a}a=!0}c(".flexi-editor-canvas").toggleClass("flexi-invalid-settings",!a);a?p.save_notify.show():p.save_notify.hide()});a.container.find(".resolve-issues-button").click(function(){for(var a in d){if("string"===typeof d[a])if("*"===d[a])continue;else{if(c("#"+a).val()===d[a])continue}else if(Array.isArray(d[a])&&
~d[a].indexOf(c("#"+a).val()))continue;c("#"+a).val(h[a]).change()}return!1});a.container.on("click",".flexi-textarea-edit",e);a.properties_panel=new aa;V.register({feeds:c("#stream-feeds"),name:c("#stream-name"),approve_new_posts:c("#approve-new-posts-automatically"),disable_on_small_screen:c("#disable-on-small-screen"),items_animation:c("#items-animation"),disable_pagination:c("#disable-pagination"),number_of_visible_items:c("#number-of-visible-items"),items_per_page:c("#items-per-page"),"private":c("#private-stream"),
transition:c("#transition"),card_skin:c("#card-skin"),custom_colors:c("#flexi-cards-colors"),text_alignment:c("#text-alignment"),gutter:c("#gutter"),order:c("#order")});c("#stream-name").on("change",function(){var a=c(this);if(!m(this.value).validate("required"))return a.addClass("flexi-error"),!1;a.removeClass("flexi-error")});c("#transition").on("change",function(){r.change_transition(this.value)});c("#card-skin").on("change",function(){if(b){b.card_skin!==this.value?(b.has_custom_colors=!1,b.custom_colors=
T[this.value]):b.custom_colors=f;var a=X[this.value],d;for(d in a)c("[data-key="+d+"]").closest(".flexi-field").toggle(a[d]);c("#flexi-cards-colors").val(b.custom_colors)}r.change_card_skin(this.value)});c("#text-alignment").on("change",function(){r.change_text_alignment(this.value)});c("#gutter").on("change",function(){b&&"slide"===b.layout?r.change_slide_gutter(this.value):r.change_gutter(this.value)});c("#order").on("change",function(){r.change_order(this.value)});c("#color-load-more-bg").closest(".flexi-input-color-holder").change(function(){r.change_color("loadMoreBackground",
c("#color-load-more-bg").val())});c("#flexi-cards-colors").change(function(){b&&(b.has_custom_colors=!0)})})();a.load_stream=function(d){r.toggle_loading(!0);a.tabs.filter(".flexi-editor-tab-moderate").toggle(!0);a.tabs.each(function(a){c(this).data("is-inited",!1)});d.custom_colors||(d.custom_colors=T[d.card_skin]);var e=X[d.card_skin],k;for(k in e)c("[data-key="+k+"]").closest(".flexi-field").toggle(e[k]);c("#flexi-cards-colors").val(d.custom_colors);f=d.custom_colors;b=d;c("#force-square-photos").closest(".flexi-field").toggle("grid"===
d.layout);c("[data-with-layout]").hide();c("[data-not-with-layout]").show();c('[data-with-layout="'+b.layout+'"]').show();c('[data-not-with-layout="'+b.layout+'"]').hide();"polaroid"===d.layout?(c("#transition, #card-skin, #number-of-cols, #gutter").attr("disabled","disabled").closest(".flexi-field").addClass("flexi-disabled"),c("#disable-pagination, #items-per-page").closest(".flexi-field").hide().next().hide()):(c("#transition, #card-skin, #number-of-cols, #gutter").attr("disabled",null).closest(".flexi-field").removeClass("flexi-disabled"),
c("#disable-pagination, #items-per-page").closest(".flexi-field").show().next().show());a.stream_name.text(d.name);c("#stream-name").removeClass("flexi-error");c(".flexi-editor-canvas").removeClass("flexi-invalid-settings");c("#shortcode").val('[flexi-instagram use="'+d.id+'"]');c("#stream-feeds").data("feeds-field")&&c("#stream-feeds").data("feeds-field").clean();V.update(d);r.load(d)};a.save_stream=function(){var d=V.get(),e;for(e in d)if("name"!==e||m(d[e]).validate("required"))b[e]=d[e];b.save().done(function(){a.stream_name.text(b.name);
c('.flexi-stream[data-stream="'+b.id+'"] .flexi-bottom-section > h2').text(b.name)});f=b.custom_colors;return b};a.select_tab=function(d){d="number"===typeof d?a.tabs.eq(d):a.tabs.filter('[data-tab="'+d+'"]');d.addClass("flexi-selected").siblings().removeClass("flexi-selected");a.container.find(".flexi-editor-content .flexi-editor-tab").removeClass("flexi-selected").filter('[data-tab="'+d.data("tab")+'"]').addClass("flexi-selected");"edit"===d.data("tab")&&D.has_changed_items()&&(r.reload(),D.reset());
"edit"!==d.data("tab")||d.data("is-inited")||r.reload();"moderate"!==d.data("tab")||d.data("is-inited")||D.load(b);d.data("is-inited",!0)};a.stream=function(){return b};a.rebuild_cache=function(){return a};a.update_stream_status=function(){$stream_el=c('.flexi-stream[data-stream="'+b.id+'"]');$stream_el.find(".flexi-icon-hashtag, .flexi-icon-profile, .flexi-icon-likes, .flexi-icon-location").remove();var a=[],d={grid:"Grid layout",slide:"Slide layout",profile:"Profile",hashtag:"Hashtag",likes:"Likes",
location:"Location"};b.feeds.forEach(function(b){~a.findIndex(function(a){return a.class_name==="flexi-icon-"+b.type})||a.push({class_name:"flexi-icon-"+b.type,title:d[b.type]})});$stream_el.find(".flexi-top-icons").append(a.map(function(a){return'<i class="'+a.class_name+'" title="'+a.title+'"></i>'}).join(""))}}var c=jQuery,B=c(q);c(h);c(q.body||"body");var T={classic:{backgroundColor:"#fff",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#737373",usernameColor:"#737373",
dateColor:"#737373",shareIconColor:"#737373"},minimalist:{backgroundColor:"#fff",descriptionColor:"#fff",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#fff",usernameColor:"#fff",dateColor:"#fff",shareIconColor:"#fff"},striped:{backgroundColor:"#ae2958",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#737373",usernameColor:"#fff",dateColor:"#fff",shareIconColor:"#737373"},florid:{backgroundColor:"#fff",descriptionColor:"#272525",loadMoreText:"#fff",
loadMoreBackground:"#3bb3e0",countersColor:"#191919",usernameColor:"#1f1c28",dateColor:"#191919",shareIconColor:"#fff"},square:{backgroundColor:"#fff",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#191919",usernameColor:"#1f1c28",dateColor:"#191919",shareIconColor:"#fff"},versatile:{backgroundColor:"#ffd156",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#191919",usernameColor:"#1f1c28",dateColor:"#191919",shareIconColor:"#fff"},
dotted:{backgroundColor:"#fff",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#191919",usernameColor:"#fff",dateColor:"#fff",shareIconColor:"#fff"},elegant:{backgroundColor:"#f1f1f1",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#737373",usernameColor:"#737373",dateColor:"#737373",shareIconColor:"#737373"},tidy:{backgroundColor:"#fff",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",
countersColor:"#fff",usernameColor:"#fff",dateColor:"#999",shareIconColor:"#fff"},balanced:{backgroundColor:"#ffca56",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#737373",usernameColor:"#737373",dateColor:"#737373",shareIconColor:"#737373"},"all-in-one":{backgroundColor:"#fff",descriptionColor:"#272525",loadMoreText:"#fff",loadMoreBackground:"#3bb3e0",countersColor:"#fff",usernameColor:"#fff",dateColor:"#fff",shareIconColor:"#fff"}},X={classic:{backgroundColor:!0,
descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!0},minimalist:{backgroundColor:!0,descriptionColor:!1,loadMoreText:!0,loadMoreBackground:!0,countersColor:!1,usernameColor:!1,dateColor:!1,shareIconColor:!1},striped:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!0},florid:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,
countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!1},square:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!1},versatile:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!1},dotted:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,
shareIconColor:!0},elegant:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!0},tidy:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!1,usernameColor:!0,dateColor:!0,shareIconColor:!1},balanced:{backgroundColor:!0,descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!0,usernameColor:!0,dateColor:!0,shareIconColor:!0},"all-in-one":{backgroundColor:!0,
descriptionColor:!0,loadMoreText:!0,loadMoreBackground:!0,countersColor:!1,usernameColor:!1,dateColor:!1,shareIconColor:!1}};x.prototype.show=function(){this.toggle(!0);return this};x.prototype.hide=function(){this.toggle(!1);return this};x.prototype.toggle=function(c){this.container&&this.container.toggle(c);return this};x.prototype.is_visible=function(){return this.container?"none"!==this.container.css("display"):!1};M.prototype=Object.create(x.prototype);M.prototype.constructor=M;N.prototype=Object.create(x.prototype);
N.prototype.constructor=N;A.prototype.show=function(){this.toggle(!0);return this};A.prototype.hide=function(){this.toggle(!1);return this};A.prototype.toggle=function(c){var a=this;a.container&&(c?(a.container.addClass("flexi-pre-visible"),setTimeout(function(){a.container.toggleClass("flexi-visible",c)},100)):(a.container.toggleClass("flexi-visible",c),setTimeout(function(){a.container.removeClass("flexi-pre-visible")},300)));return a};A.prototype.is_visible=function(){return this.container?this.container.hasClass("flexi-visible"):
!1};P.prototype=Object.create(A.prototype);P.prototype.constructor=P;J.prototype=Object.create(A.prototype);J.prototype.constructor=J;Q.prototype=Object.create(A.prototype);Q.prototype.constructor=Q;K.prototype=Object.create(A.prototype);K.prototype.constructor=K;C.prototype.props=function(){for(var e=Object.keys(this),a=e.length,b=[],f=0;f<a;f++)0===e[f].indexOf("_")||c.isFunction(this[e[f]])||b.push(e[f]);return b};C.prototype.save=function(){for(var e=this,a=e.props(),b={},f=0,d=a.length;f<d;f++)b[a[f]]=
"boolean"===typeof e[a[f]]?+e[a[f]]:e[a[f]];return c.post(p.get_base_request_url("save-"+e._model_name),b).done(function(a){try{a=JSON.parse(a),e.fill(a)}catch(k){}})};C.prototype.remove=function(){return c.get(p.get_base_request_url("remove-"+this._model_name,{id:this.id}))};C.prototype.get=function(e){var a=this;a.props();return c.get(p.get_base_request_url(a._model_name,{id:e})).done(function(b){"string"===typeof b&&(b=JSON.parse(b));a.fill(b)})};C.prototype.all=function(){var e=c.Deferred(),a=
this.get_model();c.get(p.get_base_request_url(this._model_name+"s")).done(function(b){"string"===typeof b&&(b=JSON.parse(b));for(var c=[],d=0,h=b.length;d<h;d++)c.push((new a).fill(b[d]));e.resolve(c)}).fail(function(){e.reject()});return e.promise()};C.prototype.fill=function(c){var a=this.props();if("object"===typeof c)for(var b=0,f=a.length;b<f;b++)a[b]in c&&(this[a[b]]=c[a[b]]);return this};O.prototype=Object.create(C.prototype);O.prototype.constructor=O;I.prototype=Object.create(C.prototype);
I.prototype.constructor=I;E.prototype=Object.create(C.prototype);E.prototype.constructor=E;B.on("click",".flexi-shortcode .flexi-shortcode-copy",function(){var e=c(this).closest(".flexi-shortcode").find('input[type="text"]').get(0);if("SELECT"===e.nodeName)e.focus(),selected_text=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var a=e.hasAttribute("readonly");a||e.setAttribute("readonly","");e.select();e.setSelectionRange(0,e.value.length);a||e.removeAttribute("readonly")}else e.hasAttribute("contenteditable")&&
e.focus(),e=h.getSelection(),a=q.createRange(),a.selectNodeContents(element),e.removeAllRanges(),e.addRange(a);q.execCommand("copy");return!1});B.on("click",".flexi-progress-button",function(e){var a=c(e.target);a.hasClass("flexi-button")||(a=a.closest(".flexi-progress-button"));var b=a.find(".progress-circle path");b.css("stroke-dasharray",b.get(0).getTotalLength()).css("stroke-dashoffset",b.get(0).getTotalLength());setTimeout(function(){b.css("stroke-dashoffset",0);a.addClass("flexi-working");setTimeout(function(){a.removeClass("flexi-working").addClass("flexi-success");
setTimeout(function(){a.removeClass("flexi-success flexi-error")},3E3)},4E3)},10);return!1});B.on("change",'.flexi-field-widget-size input[type="checkbox"]',function(){c(this).closest(".flexi-field-widget-size").toggleClass("flexi-field-auto",this.checked).find(".flexi-text-field").prop("disabled",this.checked)});c.fn.flexi_size_field=function(){this.find('input[type="checkbox"]').change(function(e){this.checked||e.stopImmediatePropagation();var a=c(this);a.closest(".flexi-field-widget-size").toggleClass("flexi-field-auto",
this.checked).find(".flexi-text-field").prop("disabled",this.checked).val(this.checked?"auto":"550");this.checked||setTimeout(function(){a.closest(".flexi-field-widget-size").find(".flexi-text-field").change().focus()},100)});return this.each(function(){this.type="flexi-size-field"})};c(".flexi-field-widget-size").flexi_size_field();c.valHooks["flexi-size-field"]={get:function(e){e=c(e);return e.find('input[type="checkbox"]').prop("checked")?"auto":e.find(".flexi-text-field").val()},set:function(e,
a){c(e).toggleClass("flexi-field-auto","auto"===a).find(".flexi-text-field").prop("disabled","auto"===a).val(a).end().find('input[type="checkbox"]').prop("checked","auto"===a)}};(new function(){function e(a){27===(a.keyCode||a.charCode)&&u.hide()}function a(){var a={caller:c(this).parent(),pos:c(this).offset()};B.on("mouseup",a,b).on("mousemove",a,f)}function b(a){f(a);B.off("mouseup",b).off("mousemove",f);return!1}function f(a){var b=l.width(),d=Math.max(0,Math.min(b,a.pageX-a.data.pos.left)),c=
Math.max(0,Math.min(b,a.pageY-a.data.pos.top));w.s=parseInt(100*Math.max(0,Math.min(b,a.pageX-a.data.pos.left))/b,10);w.b=parseInt(100*(b-Math.max(0,Math.min(b,a.pageY-a.data.pos.top)))/b,10);a.data={x_pos:d,y_pos:c};z(a);return!1}function d(){var a=c(this).offset();B.on("mouseup",a,h).on("mousemove",a,k)}function h(a){k(a);B.off("mouseup",h).off("mousemove",k)}function k(a){var b=n.height();w.h=parseInt(360*(b-Math.max(0,Math.min(b,a.pageY-a.data.top)))/b,10);z(a)}function p(a){a.data={color:m.css("background-color")};
r.val(a.data.color).css("border-color",a.data.color).change();g.closest(".flexi-input-color-holder").find(".flexi-input-color-spot").css("background-color",a.data.color);u.hide();g.closest(".flexi-input-color-holder").change()}function z(a){var b=l.height();a=parseInt(b*w.s/100,10);b=parseInt(b*(100-w.b)/100,10);q.css({left:a,top:b});b=n.height();b=parseInt(b-b*w.h/360,10);t.css("top",b);a=new U(w,"hsb");u.color="#"+a.hex;b=new U({h:w.h,s:100,b:100},"hsb");l.css("background-color","#"+b.hex);g.find(".flexi-color-field").val("#"+
a.hex.toString(16)).closest(".flexi-input-color-holder").change();m.css("background-color","#"+a.hex)}var u=this,g=c(".flexi-color-picker"),m=g.find(".flexi-input-color-spot"),l=g.find(".flexi-color-picker-colorlayer"),q=g.find(".flexi-color-picker-colorlayer-select"),n=g.find(".flexi-color-picker-hue"),t=g.find(".flexi-color-picker-hue-select"),v=g.find(".flexi-color-picker-button"),r=g.find(".flexi-color-field"),w={h:0,s:0,b:0};this.init=function(){c(".flexi-field:not(.flexi-only-in-pro) .flexi-input-color-holder").click(function(b){0===
c(b.target).closest(".flexi-color-picker").length&&(g=c(this),m=g.find(".flexi-input-color-spot"),l=g.find(".flexi-color-picker-colorlayer"),q=g.find(".flexi-color-picker-colorlayer-select"),n=g.find(".flexi-color-picker-hue"),t=g.find(".flexi-color-picker-hue-select"),v=g.find(".flexi-color-picker-button"),r=g.find(".flexi-color-field"),5<=g.closest(".flexi-field").index()&&g.find(".flexi-color-picker").css("bottom","101%"),g.find(".flexi-color-picker").show(),g.find(".flexi-color-picker-close").click(function(){u.hide()}),
r.change(function(){var a=c(this).val();u.set_color(a);r.val(a);g.closest(".flexi-input-color-holder").find(".flexi-input-color-spot").css("background-color",a);g.closest(".flexi-input-color-holder").change();z()}),u.set_color(r.val()),z(),g.keyup(e),l.mousedown(a),n.mousedown(d),v.click(p),g.closest(".flexi-field").siblings().find(".flexi-color-picker").hide())});B.click(function(a){a=c(a.target);a.hasClass(".flexi-input-color-holder")||a.closest(".flexi-input-color-holder").length||u.hide()})};
this.set_color=function(a){4===a.length&&(a=a.replace(/([0-9A-F])/ig,"$1$1"));w=(new U(a,"hex")).hsb};this.toggle=function(){g.is(":visible")?u.hide():u.show()};this.show=function(){c(".flexi-color-picker").show()};this.hide=function(){c(".flexi-color-picker").hide()}}).init();c.fn.flexi_colors_group=function(){return this.each(function(){this.type="flexi-colors-group"})};c(".flexi-field-colors-group").flexi_colors_group();c.valHooks["flexi-colors-group"]={get:function(e){var a={};c(e).find("[data-key]").each(function(b,
c){a[c.dataset.key]=c.value});return a},set:function(e,a){e=c(e).find("[data-key]");for(var b in a)e.filter('[data-key="'+b+'"]').val(a[b]).change().closest(".flexi-input-color-holder").find(".flexi-input-color-spot").css("background-color",a[b])}};c("[data-key]").change(function(c){c.stopImmediatePropagation();c.stopPropagation()});var V=new function(){function e(b){switch(a(b)){case "checkbox":return b.prop("checked");case "feeds":return b.data("feeds-field").get();default:return b.val()}}function a(a){return a.hasClass("flexi-text-field")?
"text":a.hasClass("flexi-select-field")?"select":a.hasClass("flexi-textarea")?"textarea":a.hasClass("flexi-feeds-field")?"feeds":a.hasClass("flexi-profanity-field")?"profanity":"checkbox"===a.attr("type")?"checkbox":"unknown"}var b=this,f={};b.register=function(a,e){if("string"===typeof a)f[a]=e instanceof jQuery?e:c(e);else for(var d in a)b.register(d,a[d]);return this};b.update=function(c,e){if("object"===typeof c)for(var d in c)b.update(d,c[d]);else if(f[c]instanceof jQuery)a:switch(c=f[c],a(c)){case "checkbox":c.prop("checked",
e);break a;case "feeds":c.data("feeds-field").add(e);break a;default:c.val(e)}return b};b.get=function(a){var b={};if("string"===typeof a)b[a]=e(f[a]);else if(Array.isArray(a))for(var c=0,d=a.length;c<d;c++)b[a[c]]=e(f[a[c]]);else for(c in f)b[c]=e(f[c]);return b};b.properties=function(){return f}};new function(){var e=this,a=[];e.container=c(".flexi-feeds-field");e.feeds_container=e.container.find(".flexi-feeds");e.feeds=e.feeds_container.children(".flexi-feed");e.container.data("feeds-field",e);
e.container.on("click",".flexi-add-feed",function(){p.create_stream_popup.add_feed_mode().show();return!1});e.feeds_container.click(function(b){b=c(b.target).closest(".flexi-feed").attr("data-feed");for(var f,d=0,e=a.length;d<e;d++)if(a[d].id===+b){f=a[d];break}f&&p.create_stream_popup.edit_feed_mode(f).show();return!1});e.feeds_container.on("click",".flexi-action-remove",function(){if(c(".flexi-dialog").length)return!1;var a=c(this).closest(".flexi-feed"),f=a.attr("data-feed");a=a.find(".caption").text();
W("Remove","Are you sure you want to remove '"+a+"' feed?").show().on_yes(function(){e.remove(f);return!1});return!1});e.add=function(b){if(Array.isArray(b))for(var c=0,d=b.length;c<d;c++)e.add(b[c]);else{a:{c=0;for(d=a.length;c<d;c++)if(a[c].id&&a[c].id===b.id||a[c].network===b.network&&a[c].type===b.type&&a[c].value===b.value){c=!0;break a}c=!1}c||(a.push(b),c=b.value,"location"===b.type?c=b.value.replace(/https?:\/\/[w]{3}?\.?instagram\.com\/explore\/locations\/[0-9]*?\/(.*?)\/?$/,"$1").replace(/\-/ig,
" "):"likes"==b.type&&(c="My Likes"),e.feeds_container.append('<div class="flexi-feed" data-feed="'+b.id+'" data-network="'+b.network+'" data-type="'+b.type+'"><span class="caption">'+c+'</span><a href="#" class="flexi-action-remove"></a></div>'))}return e};e.clean=function(){a.length=0;e.feeds_container.html("");return e};e.edit=function(b){var c=b.value;"location"===b.type?c=b.value.replace(/https?:\/\/[w]{3}?\.?instagram\.com\/explore\/locations\/[0-9]*?\/(.*?)\/?$/,"$1").replace(/\-/ig," "):"likes"==
b.type&&(c="My Likes");e.feeds_container.find('.flexi-feed[data-feed="'+b.id+'"]').attr("data-type",b.type).find(".caption").text(c);a.forEach(function(a){a.id===b.id&&(a.network=b.network,a.type=b.type,a.value=b.value)});return e};e.get=function(){return a};e.remove=function(b){b=+b;for(var c=0,d=a.length;c<d;c++)if(a[c].id===b){a.splice(c,1);v.stream().feeds.splice(c,1);break}e.feeds_container.find('.flexi-feed[data-feed="'+b+'"]').remove();c=new I;c.id=b;c.remove().done(function(){r.reload();D.toggle_loading(!0)});
return e}};var r=new function(){function e(a,b,c){a.className=a.className.replace(new RegExp("flexy-social-"+b+"-[a-zA-Z0-9-]*"),"flexy-social-"+b+"-"+c)}var a=this,b,f,d,h,k,m;(function(){m=c.Deferred();b=c(".flexi-canvas-iframe");b.on("load",function(){f=b.get(0).contentWindow;cavanas_document=f.document;d=f.social_instance;h=f.jQuery(".flexy-social");d&&d.items_holder&&m.resolve();k&&"polaroid"===k.layout&&f.jQuery(f).resize();D.reload();a.toggle_loading(!1)})})();a.load=function(d){m=c.Deferred();
a.toggle_loading(!0);b.get(0).src=p.get_base_request_url("canvas",{stream:d.id});a.add_css(d.custom_css);a.add_js(d.custom_js);k=d;return a};a.reload=function(){k&&a.load(k);return a};a.reset=function(){try{b.get(0).contentDocument.documentElement.innerHTML=""}catch(z){}return a};a.toggle_loading=function(a){b.parent().toggleClass("flexi-loading",a)};a.canvas=function(){return b};a.window=function(){return f};a.document=function(){};a.social_instance=function(){return d};a.social_container=function(){return h};
a.change_width=function(b){a.promise(function(){d.change_option("width",b)});a.center_in_canvas();return a};a.change_height=function(b){a.promise(function(){d.change_option("height",b)});a.center_in_canvas();return a};a.change_transition=function(b){a.promise(function(){e(h.get(0),"fx","");setTimeout(function(){e(h.get(0),"fx",b);d.items.removeClass("visible animate");d.update_animations();d.items.filter(".visible").removeClass("visible");d.update_item_animations()},100)});return a};a.change_card_skin=
function(b){a.promise(function(){d.change_option("skin",b)});return a};a.change_lightbox_skin=function(b){a.promise(function(){var a=f.document.querySelector(".flexy-social-slideshow");a&&(e(a,"slideshow-skin",b),d.load_skin(b,"lightbox"));d.change_option("skinLightbox",b)});return a};a.change_layout=function(b){a.promise(function(){d.change_option("layout",b)});return a};a.add_css=function(b){a.promise(function(){f.jQuery("#flexy-custom-css").html(b)});return a};a.add_js=function(b){a.promise(function(){f.jQuery("#flexy-custom-js").html("try {"+
b+"} catch (ex) { console.error(ex) }")});return a};a.change_text_alignment=function(b){a.promise(function(){h.find(".flexy-social-item .social-title").css("text-align",b)});return a};a.change_date_format=function(b){a.promise(function(){d.change_option("dateFormat",b)});return a};a.force_square_photos=function(b){a.promise(function(){d.change_option("forceSquarePhotos",b)});return a};a.hide_meta_info=function(b){a.promise(function(){h.toggleClass("flexy-social-hide-meta",b);d.update_grid()});return a};
a.hide_text=function(b){a.promise(function(){h.toggleClass("flexy-social-hide-text",b);d.update_grid()});return a};a.enable_lightbox=function(b){a.promise(function(){d.change_option("lightbox",b)});return a};a.change_columns_nr=function(b){a.promise(function(){d.change_option("grid",{cols:+b});f.jQuery(f).resize()});return a};a.change_gutter=function(b){a.promise(function(){d.change_option("grid",{gutter:+b})});return a};a.change_order_by=function(b){a.promise(function(){d.change_option("orderBy",
b)});return a};a.change_order=function(b){a.promise(function(){d.change_option("order",b)});return a};a.change_nr_visible_items=function(b){a.promise(function(){d.change_option("pagination",{initialItems:+b})});return a};a.change_items_per_page=function(b){a.promise(function(){d.change_option("pagination",{itemsPerPage:+b})});return a};a.change_slide_columns=function(b){a.promise(function(){d.change_option("slide",{cols:Math.max(0,b)})});a.center_in_canvas();return a};a.change_slide_rows=function(b){a.promise(function(){d.change_option("slide",
{rows:Math.max(0,b)})});a.center_in_canvas();return a};a.change_slide_gutter=function(b){a.promise(function(){d.change_option("slide",{gutter:Math.max(0,b)})});a.center_in_canvas();return a};a.change_slide_direction=function(b){a.promise(function(){d.change_option("slide",{direction:b})});return a};a.change_color=function(b,c){a.promise(function(){var a={};a[b]=c;d.change_option("styles",a);d.change_option("customStyles",!0);d.apply_custom_colors_temp(d.options.skin)});return a};a.clear_rules=function(b){a.promise(function(){for(var a=
f.document.getElementById("flexy-css-rules").sheet,c=a.rules||a.cssRules,d=new RegExp(".flexy-social-container.flexy-social-skin-"+b,"g"),e=[],h=0;h<c.length;h++)d.test(c[h].selectorText)&&e.push(h);for(d=0;d<e.length;d++)e[d]<c.length&&a.deleteRule(e[d])});return a};a.change_pagination_type=function(b){a.promise(function(){d.change_option("pagination",{type:b?"none":"button"})})};a.center_in_canvas=function(){a.promise(function(){f.flexi_recenter()});return a};a.promise=function(a){return m.done(a||
function(){}).promise()}},D=new function(){function e(a,b,c){a.className=a.className.replace(new RegExp("flexy-social-"+b+"-[a-zA-Z0-9-]*"),"flexy-social-"+b+"-"+c)}var a=this,b,f,d,h,k,m,n=!1;(function(){m=c.Deferred();b=c(".flexi-moderate-iframe");b.on("load",function(){f=b.get(0).contentWindow;cavanas_document=f.document;d=f.social_instance;h=f.jQuery(".flexy-social");d&&d.items_holder&&m.resolve();a.toggle_loading(!1)})})();a.load=function(d){m=c.Deferred();a.toggle_loading(!0);b.get(0).src=p.get_base_request_url("canvas",
{stream:d.id,moderate:!0});k=d;return a};a.reload=function(){k&&a.load(k);return a};a.reset=function(){try{b.get(0).contentDocument.documentElement.innerHTML=""}catch(u){}return a};a.toggle_loading=function(a){b.parent().toggleClass("flexi-loading",a)};a.has_changed_items=function(){return n};a.has_items=function(){return!!(d&&d.items_holder&&d.items_holder.children().length)};a.reset=function(){n=!1;return a};a.canvas=function(){return b};a.window=function(){return f};a.document=function(){};a.social_instance=
function(){return d};a.social_container=function(){return h};a.change_transition=function(b){a.promise(function(){e(h.get(0),"fx","");setTimeout(function(){e(h.get(0),"fx",b);d.items_holder.children().removeClass("visible animate").addClass("animate")},100)});return a};a.change_card_skin=function(b){a.promise(function(){e(h.get(0),"skin",b);d.load_skin(b);d.change_option("template",d.load_template({classic:"item",minimalist:"item",striped:"item",florid:"item-florid",square:"item",versatile:"item-florid",
dotted:"item-dotted",elegant:"item",tidy:"item-tidy",balanced:"item","all-in-one":"item-all-in-one"}[b]))});return a};a.change_lightbox_skin=function(b){a.promise(function(){var a=f.document.querySelector(".flexy-social-slideshow");a&&(e(a,"slideshow-skin",b),d.load_skin(b,"lightbox"));d.change_option("skinLightbox",b)});return a};a.change_layout=function(b){a.promise(function(){d.change_option("layout",b)});return a};a.add_css=function(b){a.promise(function(){f.jQuery("#flexy-custom-css").html(b)});
return a};a.add_js=function(b){a.promise(function(){f.jQuery("#flexy-custom-js").html("try {"+b+"} catch (ex) { console.error(ex) }")});return a};a.change_text_alignment=function(b){a.promise(function(){h.find(".flexy-social-item .social-title").css("text-align",b)});return a};a.change_date_format=function(b){a.promise(function(){d.change_option("dateFormat",b)});return a};a.hide_meta_info=function(b){a.promise(function(){h.toggleClass("flexy-social-hide-meta",b);d.update_grid()});return a};a.hide_text=
function(b){a.promise(function(){h.toggleClass("flexy-social-hide-text",b);d.update_grid()});return a};a.enable_lightbox=function(b){a.promise(function(){d.change_option("lightbox",b)});return a};a.change_columns_nr=function(b){a.promise(function(){d.change_option("grid",{cols:+b})});return a};a.change_gutter=function(b){a.promise(function(){d.change_option("grid",{gutter:+b})});return a};a.change_order_by=function(b){a.promise(function(){d.change_option("orderBy",b)})};a.change_order=function(b){a.promise(function(){d.change_option("order",
b)})};a.change_nr_visible_items=function(b){a.promise(function(){d.change_option("pagination",{initialStatus:b})})};a.change_items_per_page=function(b){a.promise(function(){d.change_option("pagination",{itemsPerPage:b})})};a.promise=function(a){return m.done(a||function(){}).promise()}};R.prototype=Object.create(A.prototype);R.prototype.constructor=R;var v=new R,p=new function(e,a){var b=this;b.version="1.0.0";b.streams=[];b.get_base_request_url=function(b,d){b=b||"";d=d?c.param(d):"";return a?FLEXI_I_AJAX_URL+
"&action=flexi-request&path="+(""!==b?"/"+b:"/")+(""!==d?"&"+d:""):e+"/"+b+(""!==d?"?"+d:"")};b.get_base_assets_url=function(a,b){a=a||"";b=b?c.param(b):"";return e+"/assets/"+a+(""!==b?"?"+b:"")};(function(){var c=a?FLEXI_I_AJAX_URL:b.get_base_request_url("auth");b.instagram_auth=new t(b,"483020c38c9146e9bbdbe5eba8f3f8be","https://www.wpdancers.com/auth/instagram/?action="+c+"fliapp=flexi-instagram-lite");b.save_notify=new Q("You have unsaved changes",[{"class":"flexi-save-changes",caption:"Save"}]);
b.welcome_page=new M(b);b.main_page=new N(b);b.create_stream_popup=new P(b);b.save_notify.buttons().click(function(){b.main_page.save_settings();v.is_visible()&&v.save_stream();b.save_notify.hide();return!1})})()}(FLEXI_I_BASE_URL.replace(/\/$/,""),!0);(new E).all().done(function(c){p.streams=c;Array.isArray(c)&&0<c.length?(p.main_page.show(),p.welcome_page.hide()):(p.main_page.hide(),p.welcome_page.show())})})(window,document);
